# 区位码输入法

一款基于 GB2312 区位码的 iOS 系统级输入法，支持通过输入 4 位数字快速输入汉字。

## 截图

![PositionCode](Screenshots/PositionCode.png)

## 功能特点

- ✅ **系统级键盘扩展** - 可在任意 App 中使用
- ✅ **完整 GB2312 支持** - 涵盖所有常用汉字
- ✅ **实时预览** - 输入区位码时实时显示对应汉字
- ✅ **码表查询** - 内置完整 GB2312 码表查询功能
- ✅ **简洁界面** - 清晰的数字键盘布局
- ✅ **便捷操作** - 长按（0.5秒）"0"按钮可切换键盘

## 什么是区位码？

GB2312 区位码是一种汉字编码方式，将每个汉字对应到一个 4 位数字编码：
- 前 2 位：区号（01-94）
- 后 2 位：位号（01-94）

例如：
- `1601` → 啊
- `3021` → 镜
- `5448` → 中
- `2136` → 的

## 安装方法

### 1. 编译安装

```bash
# 克隆项目
git clone <repository-url>
cd ChineseCharacterPositionCode

# 使用 Xcode 打开项目
open ChineseCharacterPositionCode.xcodeproj

# 连接 iOS 真机，选择设备后运行（Command + R）
```

### 2. 添加键盘

1. 在设备上打开主 App
2. 点击"使用说明"标签页
3. 点击"打开键盘设置"按钮
4. 在键盘列表中点击"添加新键盘..."
5. 在第三方键盘列表中找到"区位码"
6. 点击添加

### 3. 使用键盘

1. 在任意输入框中调出键盘
2. **长按（0.5秒）"0"按钮**，选择"区位码"
3. 输入 4 位数字即可输入对应汉字

## 使用说明

### 键盘布局

```
┌─────────────────────────┐
│  区位码: 1601           │
│  啊                     │  ← 输入显示区（实时预览）
└─────────────────────────┘
┌───┬───┬───┐
│ 1 │ 2 │ 3 │
├───┼───┼───┤
│ 4 │ 5 │ 6 │
├───┼───┼───┤
│ 7 │ 8 │ 9 │
└───┴───┴───┘
┌───┬─────┬───────┬─────┐
│ 0 │删除 │  空格  │换行 │
└───┴─────┴───────┴─────┘
```

### 功能按键

- **数字键 0-9**：输入区位码
- **0 按钮**：**点击**输入数字 0，**长按（0.5秒）**切换键盘
- **删除**：删除输入的数字或已输入的字符
- **空格**：输入空格
- **换行**：输入换行符

### 输入流程

1. 输入 4 位区位码数字
2. 系统自动显示对应汉字预览
3. 输入完成后自动插入汉字
4. 继续输入下一个字符

## 码表查询

主 App 提供完整的 GB2312 码表查询功能：

### 功能

- **按区浏览**：选择 1-94 区查看该区所有汉字
- **搜索功能**：输入区位码快速定位
- **字符详情**：点击汉字查看详细信息
- **复制功能**：可复制区位码或汉字

### 区位分布

| 区号 | 内容 |
|------|------|
| 01-09 | 特殊符号 |
| 10-15 | 数字、字母等 |
| 16-55 | 一级汉字（3755个，按拼音排序）|
| 56-87 | 二级汉字（3008个，按部首排序）|

## 常用汉字区位码示例

### 常用汉字区位码示例

### 一级常用字（第 16-55 区）

- `1601` 啊 - `1602` 阿 - `1603` 埃 - `1604` 挨
- `3021` 镜 - `3022` 盅 - `3023` 忠 - `3024` 钟
- `5448` 中 - `5449` 图 - `5450` 圄 - `5451` 团

### 高频汉字

- `2136` 的
- `5027` 一
- `4239` 是
- `1823` 不
- `1670` 了
- `2934` 人
- `1862` 我
- `2050` 在
- `2123` 有
- `2976` 他

## 技术架构

### 项目结构

```
ChineseCharacterPositionCode/
├── ChineseCharacterPositionCode/    # 主 App
│   ├── ChineseCharacterPositionCodeApp.swift
│   ├── ContentView.swift             # 主界面（码表查询 + 使用说明）
│   └── GB2312Data.swift              # 区位码数据模型
├── PositionCodeKeyboard/             # 键盘扩展
│   ├── KeyboardViewController.swift  # 键盘实现
│   └── Info.plist                    # 键盘配置
└── README.md
```

### 核心技术

- **SwiftUI**：主 App 界面开发
- **UIKit**：自定义键盘实现
- **Keyboard Extension**：iOS 键盘扩展
- **GB2312 编码转换**：区位码到 Unicode 的转换

### 区位码转换原理

```swift
// GB2312 编码计算公式
let highByte = area + 0xA0      // 区号 + 0xA0
let lowByte = position + 0xA0   // 位号 + 0xA0

// 使用 GB_18030_2000 编码转换为 Unicode
let gb2312Bytes: [UInt8] = [UInt8(highByte), UInt8(lowByte)]
let character = String(bytes: gb2312Bytes, encoding: .GB_18030_2000)
```

## 系统要求

- iOS 14.0 或更高版本
- Xcode 14.0 或更高版本
- 真机测试（键盘扩展不支持模拟器）

## 常见问题

### Q: 为什么添加键盘后看不到？

A: 请确保：
1. 完全删除旧版本 App 后重新安装
2. 使用真机运行（不是模拟器）
3. 在系统设置中正确添加键盘
4. 尝试重启设备

### Q: 如何切换到区位码键盘？

A: 在任意输入框中，**长按（0.5秒）"0"按钮**（或其他键盘的地球图标），在弹出菜单中选择"区位码"。

### Q: 为什么有些区位码查不到字？

A: GB2312 标准并非所有区位都有对应汉字，某些位置为空或保留。

### Q: 可以输入特殊符号吗？

A: 可以，第 1-9 区包含各种特殊符号，可在码表查询中查看。

## 开发计划

- [ ] 支持常用汉字收藏功能
- [ ] 添加区位码反查功能（输入汉字查区位码）
- [ ] 支持深色模式
- [ ] 添加键盘音效和震动反馈
- [ ] 优化键盘布局适配不同屏幕尺寸

## 许可证

MIT License

## 贡献

<https://github.com/build-your-own-x-with-ai/ChineseCharacterPositionCode>

欢迎提交 Issue 和 Pull Request！

## 联系方式

如有问题或建议，请提交 Issue。

---

**注意**：本项目仅供学习交流使用，区位码输入法适合需要精确输入汉字或学习汉字编码的场景。
